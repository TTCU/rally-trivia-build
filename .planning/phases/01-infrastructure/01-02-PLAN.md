---
phase: 01-infrastructure
plan: 02
type: execute
wave: 2
depends_on:
  - "01-01"
files_modified:
  - src/layouts/BaseLayout.astro
  - src/components/BaseHead.astro
  - src/components/Nav.astro
  - src/components/Footer.astro
  - src/components/ScrollAnimations.astro
  - src/pages/index.astro
  - src/pages/features.astro
  - src/pages/about.astro
  - src/pages/contact.astro
autonomous: true
requirements:
  - INFR-03
  - INFR-04
  - INFR-05
  - INFR-07
  - INFR-08
  - INFR-10

must_haves:
  truths:
    - "Every page displays the shared Nav with logo, page links (Features, About, Contact), and 'Request a Demo' CTA button"
    - "Every page displays the shared Footer with logo, page links, tagline, and copyright"
    - "Every page has SEO meta tags (title, description, canonical URL, OG tags) in the head"
    - "The site is responsive — nav collapses to hamburger on mobile, content reflows correctly at 375px, 768px, and 1280px"
    - "Scroll-triggered fade animations activate as sections enter the viewport"
    - "The Rally Trivia logo appears in both Nav and Footer"
  artifacts:
    - path: "src/layouts/BaseLayout.astro"
      provides: "Page wrapper with html/head/body, imports BaseHead + Nav + Footer + font + global CSS"
      min_lines: 25
    - path: "src/components/BaseHead.astro"
      provides: "SEO meta tags — title, description, canonical URL, OG tags, Twitter card"
      min_lines: 20
    - path: "src/components/Nav.astro"
      provides: "Responsive navigation — logo, links (Features, About, Contact), CTA button, hamburger menu"
      min_lines: 40
    - path: "src/components/Footer.astro"
      provides: "Site footer — logo, page links, tagline, copyright"
      min_lines: 20
    - path: "src/components/ScrollAnimations.astro"
      provides: "Reusable scroll-triggered animation script using Motion library"
      min_lines: 10
  key_links:
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/BaseHead.astro"
      via: "Astro component import"
      pattern: "import BaseHead"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/Nav.astro"
      via: "Astro component import"
      pattern: "import Nav"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/Footer.astro"
      via: "Astro component import"
      pattern: "import Footer"
    - from: "src/layouts/BaseLayout.astro"
      to: "@fontsource-variable/plus-jakarta-sans"
      via: "Frontmatter import"
      pattern: "import.*fontsource"
    - from: "src/pages/index.astro"
      to: "src/layouts/BaseLayout.astro"
      via: "Layout wrapper"
      pattern: "import.*BaseLayout"
    - from: "src/components/Nav.astro"
      to: "assets/images/RallyTrivia_logo_primary_transparent.svg"
      via: "Astro image import or img src"
      pattern: "RallyTrivia_logo"
---

<objective>
Build the BaseLayout, Nav, Footer, BaseHead SEO component, and scroll animation utility — then wire all placeholder pages to use the shared layout. Every page will have consistent navigation, footer, SEO tags, responsive design, and scroll animations.

Purpose: Complete the infrastructure shell so that Phase 2 content can drop into BaseLayout and immediately have nav, footer, SEO, responsiveness, and animations working.
Output: A fully functional layout system with responsive Nav (hamburger on mobile), Footer, SEO meta tags, and scroll-triggered animations on every page.
</objective>

<execution_context>
@/Users/jslitzker/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jslitzker/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-infrastructure/01-RESEARCH.md
@.planning/phases/01-infrastructure/01-CONTEXT.md
@.planning/phases/01-infrastructure/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BaseHead, Nav, Footer, and ScrollAnimations components</name>
  <files>
    src/components/BaseHead.astro
    src/components/Nav.astro
    src/components/Footer.astro
    src/components/ScrollAnimations.astro
    src/components/Header.astro (delete)
    src/components/HeaderLink.astro (delete)
    src/layouts/BlogPost.astro (delete)
  </files>
  <action>
1. Delete old blog scaffold components:
   - Delete `src/components/Header.astro` (old blog header)
   - Delete `src/components/HeaderLink.astro` (old blog header link)
   - Delete `src/layouts/BlogPost.astro` (old blog layout)

2. Rewrite `src/components/BaseHead.astro` with SEO meta tags:
   - Accept props: `title: string`, `description: string`, `image?: string`
   - Generate canonical URL from `Astro.url.pathname` + `Astro.site`
   - Include: charset, viewport, canonical link, favicon link
   - Title format: `{title} | Rally Trivia`
   - OG tags: og:type (website), og:url, og:title, og:description, og:image
   - Twitter card: summary_large_image, twitter:title, twitter:description, twitter:image
   - Default OG image fallback to `/favicon.svg`
   - Import `../styles/global.css` here so it loads on every page

3. Create `src/components/Nav.astro` — responsive navigation:
   - Layout: Logo on left, nav links center-right, CTA button far right (desktop). Per user decision, exact layout is Claude's discretion.
   - Logo: Import Rally Trivia logo from `../../assets/images/RallyTrivia_logo_primary_transparent.svg` using Astro Image or direct `<img>` tag. The logo links to `/` (home). Size it appropriately for a nav bar (~40px height).
   - Nav links: Features (`/features`), About (`/about`), Contact (`/contact`). No explicit Home link — logo click returns home.
   - CTA button: "Request a Demo" linking to `/contact`. Style with `bg-gold` (or `bg-coral`) text, rounded corners (`rounded-brand`), bold text, hover state.
   - Sticky behavior: Claude's discretion — recommend sticky top with glass/blur effect using `backdrop-blur` and `bg-navy/90`.
   - Mobile hamburger (below `md:` breakpoint):
     - Hide nav links and CTA behind hamburger button
     - Hamburger button with aria-expanded attribute
     - Toggle mobile menu panel with vanilla JS `<script>` block (see Pattern 4 in RESEARCH.md)
     - Mobile menu: full-width dropdown/slide-down with links stacked vertically, CTA button at bottom
   - Active link highlighting based on `Astro.url.pathname`
   - Use Tailwind responsive prefixes: `hidden md:flex` for desktop links, `md:hidden` for hamburger
   - Overall feel: Clean, modern, confident. Use `text-white` on `bg-navy` backgrounds. Electric blue or gold for hover states.

4. Rewrite `src/components/Footer.astro` — site footer:
   - Background: Dark navy (`bg-navy`) per Claude's discretion recommendation
   - Logo: Same Rally Trivia logo, smaller version
   - Page links: Features, About, Contact (same as nav)
   - Tagline: Brief brand tagline (e.g., "Interactive trivia for unforgettable events")
   - Copyright: "© 2026 Rally Trivia. All rights reserved." — no social icons, no legal links per user decision
   - Layout: Responsive grid — logo + tagline on left, links on right at desktop; stacked on mobile
   - Generous padding, clean divider line between content and copyright

5. Create `src/components/ScrollAnimations.astro`:
   - Contains a `<script>` tag that imports `animate` and `inView` from `"motion"`
   - Applies fade-in animation to all elements with `class="animate-on-scroll"`:
     - `opacity: [0, 1]`, `y: [30, 0]`
     - Duration: 0.6s, easing: `[0.39, 0.24, 0.3, 1]`
     - Trigger when 25% of element is visible (`amount: 0.25`)
   - This component is included once in BaseLayout and works globally
   - Animation style: Subtle fade-in per user decision — "smooth and understated, not distracting"
  </action>
  <verify>
    - `ls src/components/Header.astro 2>/dev/null` returns nothing (deleted)
    - `ls src/components/HeaderLink.astro 2>/dev/null` returns nothing (deleted)
    - `ls src/layouts/BlogPost.astro 2>/dev/null` returns nothing (deleted)
    - `cat src/components/BaseHead.astro` contains `og:title` and `canonical`
    - `cat src/components/Nav.astro` contains `Request a Demo` and `hamburger`
    - `cat src/components/Footer.astro` contains `© 2026 Rally Trivia`
    - `cat src/components/ScrollAnimations.astro` contains `inView` and `animate`
    - `grep -r "RallyTrivia_logo" src/components/` finds references in Nav and Footer
  </verify>
  <done>Old blog components deleted. BaseHead provides SEO meta tags. Nav has responsive navigation with logo, links, CTA, and hamburger. Footer has logo, links, tagline, and copyright. ScrollAnimations provides reusable Motion-based fade-in.</done>
</task>

<task type="auto">
  <name>Task 2: Create BaseLayout and wire all pages to use it</name>
  <files>
    src/layouts/BaseLayout.astro
    src/pages/index.astro
    src/pages/features.astro
    src/pages/about.astro
    src/pages/contact.astro
  </files>
  <action>
1. Create `src/layouts/BaseLayout.astro`:
   - Import `@fontsource-variable/plus-jakarta-sans` in frontmatter (Fontsource font registration)
   - Import BaseHead, Nav, Footer, ScrollAnimations components
   - Accept props: `title: string`, `description: string`, `image?: string`
   - HTML structure:
     ```
     <!doctype html>
     <html lang="en">
       <head>
         <BaseHead title={title} description={description} image={image} />
       </head>
       <body class="bg-white text-navy font-sans min-h-screen flex flex-col">
         <Nav />
         <main class="flex-1">
           <slot />
         </main>
         <Footer />
         <ScrollAnimations />
       </body>
     </html>
     ```
   - Body background: white for main content area (dark hero sections will override locally in Phase 2). Per CONTEXT.md: "dark hero with light body recommended."
   - `flex flex-col` + `flex-1` on main ensures footer sticks to bottom on short pages.

2. Rewrite all 4 placeholder pages to use BaseLayout:

   `src/pages/index.astro`:
   ```astro
   ---
   import BaseLayout from '../layouts/BaseLayout.astro';
   ---
   <BaseLayout title="Home" description="Interactive trivia experiences for nonprofit fundraisers and corporate events">
     <section class="py-20 px-8 text-center animate-on-scroll">
       <h1 class="text-5xl font-bold text-deep-blue mb-4">Rally Trivia</h1>
       <p class="text-xl text-navy/70 max-w-2xl mx-auto">Interactive trivia experiences for unforgettable events. Content coming soon.</p>
     </section>
   </BaseLayout>
   ```

   `src/pages/features.astro`:
   ```astro
   ---
   import BaseLayout from '../layouts/BaseLayout.astro';
   ---
   <BaseLayout title="Features" description="Discover Rally Trivia's interactive trivia platform features">
     <section class="py-20 px-8 text-center animate-on-scroll">
       <h1 class="text-5xl font-bold text-deep-blue mb-4">Features</h1>
       <p class="text-xl text-navy/70 max-w-2xl mx-auto">Platform features coming soon.</p>
     </section>
   </BaseLayout>
   ```

   `src/pages/about.astro` and `src/pages/contact.astro`: Same pattern with appropriate title/description.

3. Run `npm run build` and verify:
   - Build succeeds
   - All 4 HTML files in dist/ contain the nav with "Request a Demo"
   - All 4 HTML files contain the footer with "© 2026 Rally Trivia"
   - All 4 HTML files contain `<meta property="og:title"`
   - All 4 HTML files contain `<link rel="canonical"`
   - `dist/sitemap-index.xml` still generates correctly

4. Run `npm run dev` briefly and verify the dev server starts without errors (quick smoke test — start and immediately stop is sufficient).

5. Visually confirm responsive considerations:
   - Nav links have `hidden md:flex` (hidden on mobile)
   - Hamburger has `md:hidden` (hidden on desktop)
   - Footer layout uses responsive grid classes
  </action>
  <verify>
    - `npm run build` exits 0
    - `grep "Request a Demo" dist/index.html` finds the CTA
    - `grep "Request a Demo" dist/features/index.html` finds the CTA
    - `grep "© 2026 Rally Trivia" dist/index.html` finds the copyright
    - `grep "og:title" dist/index.html` finds OG tags
    - `grep "canonical" dist/index.html` finds canonical URL
    - `grep "RallyTrivia" dist/index.html` confirms logo reference
    - `grep "animate-on-scroll" dist/index.html` confirms animation classes present
    - `grep "inView" dist/index.html` confirms Motion script bundled (may be in JS bundle)
    - `ls dist/sitemap-index.xml` succeeds
  </verify>
  <done>BaseLayout wraps every page with Nav, Footer, SEO, and scroll animations. All 4 placeholder pages use BaseLayout. Navigation shows logo + links + CTA on desktop, hamburger on mobile. Footer shows logo + links + copyright. SEO meta tags render on every page. Site builds successfully as static HTML.</done>
</task>

</tasks>

<verification>
1. `npm run build` exits 0
2. `dist/` contains index.html, features/index.html, about/index.html, contact/index.html — all with Nav and Footer
3. Every page has `<meta property="og:title">` and `<link rel="canonical">`
4. Nav contains "Request a Demo" CTA linking to /contact
5. Nav has hamburger menu markup with `md:hidden`
6. Footer contains "© 2026 Rally Trivia. All rights reserved."
7. Rally Trivia logo referenced in both Nav and Footer
8. `dist/sitemap-index.xml` lists all 4 pages
9. ScrollAnimations script imports from "motion" library
10. No `_worker.js` in dist/
</verification>

<success_criteria>
- BaseLayout wraps all 4 pages with shared Nav, Footer, and SEO
- Nav is responsive with hamburger menu on mobile
- Footer has logo, links, tagline, copyright (no social icons)
- SEO meta tags on every page (canonical, OG, Twitter card)
- Scroll-triggered fade animations configured via Motion library
- Rally Trivia logo in Nav and Footer
- Site builds and passes all verification checks
</success_criteria>

<output>
After completion, create `.planning/phases/01-infrastructure/01-02-SUMMARY.md`
</output>
